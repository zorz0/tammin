"use strict";var l=Ladda.create(document.querySelector("#btnLoginHeader"));function checkInputLength(e){(e.value<0||""==e.value)&&(e.value=e.value.slice(1));4<e.value.length&&(e.value=e.value.slice(0,4))}function encryptCredentials(){var e=CryptoJS.enc.Utf8.parse(enky),o=CryptoJS.enc.Utf8.parse(enky),a=$("#login-email").val(),t=$("#login-password").val(),r=CryptoJS.AES.encrypt(CryptoJS.enc.Utf8.parse(a),e,{keySize:16,iv:o,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7});$("#EncEl").val(r);var i=CryptoJS.AES.encrypt(CryptoJS.enc.Utf8.parse(t),e,{keySize:16,iv:o,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7});$("#EncPS").val(i)}function getCaptcha(){$.ajax({url:"/api/V1/Captcha",type:"GET",success:function(e){var o="data:image/png;base64,"+e.image;$("#CaptchaImageForLogin").attr("src",o),$("#captchaToken").val(e.token)},error:function(e,o,a){console.log(a)}})}function LoginOTPRedirection(e){$.ajax({type:"GET",url:e,dataType:"html",traditional:!0,success:function(e){$("#signin-signup-content").hide(),$("#payment-login-content").hide(),$("#payment-signup-content").hide(),$("#payment-signup-otp").html(""),$("#payment-signup-otp").html(e),$("#payment-signup-otp").show(),setTimeout(function(){$("#SMSCode").focus()},1e3)}})}$("#btnLoginHeader").click(function(){$("#LoginErrorMessage").hide()}),$("#forgetPasswordDiv").click(function(){$("#login-popup").modal("hide"),window.location.href=validateMobileURL}),$("#loginIdentityNumber").on("paste",function(e){var o=(e.originalEvent.clipboardData||window.clipboardData).getData("text");isNaN(o)&&(e.preventDefault(),$(this).val(""))}),$("#login-email").focusout(function(){$(this).trimTheText(),$(this).val($(this).val().toLowerCase())}),$(function(){$("#frmLogin").submit(function(e){if($("#SchemeCaptchaErrorMessage").hide(),$("#SchemeCaptchaErrorMessage").html(""),$("#passwordValidationError").hide(),$("#passwordValidationError").html(""),0==$("#passwordField").is(":visible")&&""!=$("#login-password").val()&&$("#login-password").val(""),""==$("#captchaCode").val()&&0==$("#passwordField").is(":visible"))return $("#SchemeCaptchaErrorMessage").show(),$("#SchemeCaptchaErrorMessage").html(captchaRequired),e.preventDefault(),0;if(1==$("#passwordField").is(":visible")&&""==$("#login-password").val())return $("#passwordValidationError").show(),$("#passwordValidationError").html(passwordIsRequired),e.preventDefault(),0;if(""!=$("#loginIdentityNumber").val()){l.start(),$("#LoginErrorMessage").hide(),$("#LoginErrorMessage").html(""),e.preventDefault();var o=$(this);if($(this).valid()){$("#PolicyHolderUniqueId").prop("disabled",!0);var a=o.serialize();$("#PolicyHolderUniqueId").prop("disabled",!1),$.ajax({type:"POST",url:controllerurl,data:a+"&IdentityNumber="+$("#loginIdentityNumber").val()+"&CaptchaCode="+$("#captchaCode").val()+"&CaptchaToken="+$("#captchaToken").val()+"&CurrentPagelangauge="+$("#hdnCurrentPageLangauge").val()+"&isCaptcha="+!0+"&IsLoginWithHomePageFlow="+!1,dataType:"json",traditional:!0,success:function(e){if("Error"==e.OK){$("#LoginErrorMessage").show(),$("#LoginErrorMessage").html(e.Error);try{$($(".validation-summary-errors")[3]).show(),$($(".validation-summary-errors")[3]).html(e.Error)}catch(e){}return getCaptcha(),void l.stop()}if("CaptchaNotValid"==e.OK){$("#SchemeCaptchaErrorMessage").show(),$("#SchemeCaptchaErrorMessage").html(captchaNotValid),$("#LoginErrorMessage").hide(),$("#LoginErrorMessage").html(""),$("#captchaCode").val("");try{$($(".validation-summary-errors")[2]).hide(),$($(".validation-summary-errors")[2]).html("")}catch(e){}return l.stop(),void getCaptcha()}if("RedirectToValidateMobile"==e.OK)localStorage.removeItem("token"),document.cookie="JToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="JwtToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",localStorage.removeItem("logintimerCount"),localStorage.removeItem("loginotpRetrycount"),l.stop(),isHybridAppUserAgent&&updateFcmTokenFromWeb(),window.location.href=e.NavigateUrl;else if("LoginOTPSuccess"==e.OK){if(0==$("#passwordField").is(":visible"))return validateMobileURL=e.NavigateUrl,$("#passwordField").show(),$("#forgetPasswordDiv").show(),$("#identityField").hide(),$("#divSchemeCaptcha").hide(),void l.stop();localStorage.removeItem("token"),document.cookie="JToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="JwtToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",localStorage.removeItem("logintimerCount"),localStorage.removeItem("loginotpRetrycount"),l.stop(),isHybridAppUserAgent&&updateFcmTokenFromWeb(),window.location.href=e.NavigateUrl}else l.stop()},errors:function(){$("#LoginErrorMessage").addClass("alert alert-error"),$("#LoginErrorMessage").html(data.Error),$("#frmLogin").find("#mathcaptcha").html(""),l.stop()}})}else $("#frmLogin *").filter(":input[type=text]").each(function(){""!=$(this).val()||$(this).focus()})}})}),jQuery.fn.resetValidation=function(){var e=this.closest("form");return e.validate().resetForm(),e.find("[data-valmsg-summary=true]").removeClass("validation-summary-errors").addClass("validation-summary-valid").find("ul").empty(),e.find("[data-valmsg-replace]").removeClass("field-validation-error").addClass("field-validation-valid").empty(),e},$("#login-popup").on("shown.bs.modal",function(e){$("#login-email").focus(),$("#login-email").rules("remove","required")}),$(document).ready(function(){"true"==strError.toLowerCase()&&($("#login-popup").modal("show"),$("#signup-content").hide(),$("#without-login").hide(),$("#login-content").show(),BackdropiconShow()),$("#LoginErrorMessage").hide()}),$("#login-email").bind("keyup",function(e){ConvertToLowerWithKeyCode(e)});
//# sourceMappingURL=_login.min.js.map
