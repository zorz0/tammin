{"version":3,"sources":["stacktrace.js"],"names":["logError","ex","stack","logErrorUrl","alert","url","fileName","document","location","out","message","name","join","$","ajax","type","data","Function","prototype","trace","current","push","signature","caller","getName","params","toString","length","arguments","x","definition","split","exp","test","replace","window","onerror","msg","line","callee"],"mappings":"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","sourcesContent":["function logError(ex, stack) {\r\n    if (ex == null) return;\r\n    if (logErrorUrl == null) {\r\n        alert('logErrorUrl must be defined.');\r\n        return;\r\n    }\r\n\r\n    var url = ex.fileName != null ? ex.fileName : document.location;\r\n    if (stack == null && ex.stack != null) stack = ex.stack;\r\n\r\n    // format output\r\n    var out = ex.message != null ? ex.name + \": \" + ex.message : ex;\r\n    out += \": at document path '\" + url + \"'.\";\r\n    if (stack != null) out += \"\\n  at \" + stack.join(\"\\n  at \");\r\n\r\n    // send error message\r\n    $.ajax({\r\n        type: 'POST',\r\n        url: logErrorUrl,\r\n        data: { message: out }\r\n    });\r\n}\r\n\r\nFunction.prototype.trace = function () {\r\n    var trace = [];\r\n    var current = this;\r\n    while (current) {\r\n        trace.push(current.signature());\r\n        current = current.caller;\r\n    }\r\n    return trace;\r\n}\r\n\r\nFunction.prototype.signature = function () {\r\n    var signature = {\r\n        name: this.getName(),\r\n        params: [],\r\n        toString: function () {\r\n            var params = this.params.length > 0 ?\r\n                \"'\" + this.params.join(\"', '\") + \"'\" : \"\";\r\n            return this.name + \"(\" + params + \")\"\r\n        }\r\n    };\r\n    if (this.arguments) {\r\n        for (var x = 0; x < this.arguments.length; x++)\r\n            signature.params.push(this.arguments[x]);\r\n    }\r\n    return signature;\r\n}\r\n\r\nFunction.prototype.getName = function () {\r\n    if (this.name)\r\n        return this.name;\r\n    var definition = this.toString().split(\"\\n\")[0];\r\n    var exp = /^function ([^\\s(]+).+/;\r\n    if (exp.test(definition))\r\n        return definition.split(\"\\n\")[0].replace(exp, \"$1\") || \"anonymous\";\r\n    return \"anonymous\";\r\n}\r\n\r\nwindow.onerror = function (msg, url, line) {\r\n    if (arguments != null && arguments.callee != null && arguments.callee.trace)\r\n        logError(msg, arguments.callee.trace());\r\n}"],"file":"stacktrace.dev.js"}